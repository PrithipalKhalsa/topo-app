doctype html
head
  title Literally Canvas
  link(href='literallycanvas.css' rel='stylesheet' type='text/css')
  meta(charset='UTF-8')
  meta(name='viewport' content='width=device-width, user-scalable=no')
  style(type='text/css').
    .hidden {
    display: none;
    }
    .fs-container {
    width: 320px;
    margin: auto;
    }
    .literally {
    width: 100%;
    height: 100%;
    position: relative;
    }
    form {
    width: 100px;
    }
    input {
    display: block;
    margin-bottom: 10px;
    padding: 5px;
    width: 100%;
    border: 1px solid lightgrey;
    border-radius: 3px;
    font-size: 16px;
    }
    button {
    font-size: 16px;
    border-radius: 3px;
    background-color: lightgrey;
    border: 1px solid grey;
    box-shadow: 2px 2px teal;
    cursor: pointer;
    }
    button:hover {
    background-color: yellow;
    }
    button:active {
    box-shadow: none;
    }
// you really ought to include react-dom, but for react 0.14 you don't strictly have to.
script(src='//cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-with-addons.js')
script(src='//cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js')
script(type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/react/0.14.3/react.js')
script(type='text/javascript' src='literallycanvas.js')
script(type='text/javascript' src='https://sdk.amazonaws.com/js/aws-sdk-2.279.1.min.js')
script(type='text/javascript' src='https://code.jquery.com/jquery-3.3.1.slim.min.js')
.fs-container
  #lc
script(type='text/javascript').
  var lc = LC.init(document.getElementById("lc"), {
  keyboardShortcuts: false,
  tools: [LC.tools.Pencil, LC.tools.Eraser, LC.tools.Line,
  LC.tools.Text, LC.tools.Pan],
  imageURLPrefix: 'lc-images',
  toolbarPosition: 'bottom',
  defaultStrokeWidth: 1,
  strokeWidths: [1]
  });
#contact
  form(action='https://84113db646b54538946028a66c8c1196.vfs.cloud9.us-west-2.amazonaws.com/savetopo' method='post')
    fieldset
      label(for='name') Name:
      input#name(type='text' name='name' placeholder='Enter your full name')
      label(for='routename') routename
      input#routename(type='text' name='routename' placeholder='Enter the route name')
      label.hidden(for='json') topojson
      input#topoTarget(type='textarea' name='topojson')
      input#submitTopo(type='submit' value='Submit Topo')
  script(type='text/javascript').
    // hack to save drawing json string
    // by changing the value of a hidden form field every second.
    $('#lc').ready(function() {
    const getTopo = () => JSON.stringify(lc.getSnapshot(['shapes', 'imageSize', 'colors', 'position', 'scale', 'backgroundShapes']));
    const setTopo = function() {
    const topoTarget = document.getElementById('topoTarget');
    topoTarget.value = getTopo();
    }
    setInterval(setTopo, 1000);
    })
    // adding an event listener would make more sense
    // just didn't figure it out yet
    // const submitTopo = document.getElementById('submitTopo');
    // submitTopo.addEventListener('click', setTopo);
  div
